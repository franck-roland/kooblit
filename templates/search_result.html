{% extends "base.html" %}
{% load static %}
<!DOCTYPE html>

{% block extra_css %}
<link href="{% static "css/result_page.css" %}" rel="stylesheet">
{% endblock %}
{% block content %}
<div class="container container_result" style="padding-top:50px;">
<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
<!--   <ol class="carousel-indicators">
    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
    <li data-target="#carousel-example-generic" data-slide-to="2"></li>
  </ol> -->

  <!-- Wrapper for slides -->
  <div class="carousel-inner">
    <!-- <div class="item active">
      <div class="carousel-caption">
        ... 
        plp
      </div>
    </div> -->
  
    
  {% if resultat %}
    {% for item in resultat %}
      {% if forloop.counter0|divisibleby:4  %}
      <div class="item">
        <div class="col-xs-12 col-sm-12 col-md-12" style="text-align:center;">
          <span>
          {% if forloop.last %}
            {% widthratio resultat|length 4 1 %} / {% widthratio resultat|length 4 1 %}
          {% else %}
            {% widthratio forloop.counter0|add:4 4 1 %} / {% widthratio resultat|length 4 1 %}
          {% endif %}
          </span>
        </div>
      {% endif %}
        {% if item.3 %}
        <div class="img_container2 col-2 col-sm-2 col-lg-2 col-md-offset-1 col-sm-offset-1 col-xs-6" style='background-image:url("{{ item.3 }}");' >
         <!--    <a href="{{ item.2 }}"><img class="img-responsive img_res" src='{{ item.1 }}' alt='{{ item.0 }}' /></a> -->
        {% else %}
        <div class="img_container2 col-2 col-sm-2 col-lg-2 col-md-offset-1 col-sm-offset-1 col-xs-6" style="background-image:url('{% static 'img/empty_gallery.png' %}');" >
            <!-- <a href="{{ item.2 }}"><img class="img-responsive img_res" src="{% static "img/empty_gallery.png" %}" alt='{{ item.0 }}' /></a> -->
        {% endif %}
        <div class="col-xs-12 col-sm-12 col-md-4" >
          <a class="thumbnail" href="{% url 'book_management:post' '' %}?title={{item.0}}">
            <img src="{% static "img/coins24.png" %}"/>
          </a>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-4 col-md-offset-2" >
          <a class="thumbnail" href="{% url 'book_management:search' '' %}?title={{item.0}}">
            <img src="{% static "img/magnifier13.png" %}"/>
          </a>
        </div>
         <!-- <a class="btn btn-lg btn-primary col-12" href="{% url 'book_management:post' '' %}?title={{item.0}}" role="button" style="z-index:9999;margin-bottom=0px;margin-left:auto;">Poster une synthèse</a>
         <a class="btn btn-lg btn-primary col-12" href="{% url 'book_management:search' '' %}?title={{item.0}}" role="button" style="z-index:9999;margin-bottom=0px;margin-left:auto;">Rechercher une synthèse</a> -->
        </div>
      {% if forloop.counter0|add:"1"|divisibleby:"4"  or forloop.last %}
      </div>
      {% endif %}
    {% endfor %}
  {% else %}
    <img class="img-responsive img_res" src="{% static "img/empty_gallery.png" %}" alt='{{ item.0 }}' />
  {% endif %}
    <!-- ... -->
  </div>

  <!-- Controls -->
  <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev" style="width:5%;">
    <span class="glyphicon glyphicon-chevron-left"></span>
  </a>
  <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next" style="width:5%;">
    <span class="glyphicon glyphicon-chevron-right"></span>
  </a>
</div>
</div>

{% endblock %}
{% block script_block %}
<script type="text/javascript" src="{% static "js/jquery.mobile.custom.min.js" %}"></script>
<script type="text/javascript">
  function isTouchSupported() {
    var msTouchEnabled = window.navigator.msMaxTouchPoints;
    var generalTouchEnabled = "ontouchstart" in document.createElement("div");
 
    if (msTouchEnabled || generalTouchEnabled) {
        return true;
    }
    return false;
  }
  $(".item:first").addClass("active");
  $(document).ready(function() {  
    $('.carousel').carousel({
      interval: false
    });
    if(isTouchSupported()){
       $("#carousel-example-generic").swiperight(function() {  
          $(this).carousel('prev');  
          });  
       $("#carousel-example-generic").swipeleft(function() {  
          $(this).carousel('next');
        $(".carousel-control").remove();  
     });
    }  
  }); 
</script>
{% endblock %}